<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HÆ°á»›ng dáº«n TÆ°Æ¡ng tÃ¡c: CÃ i Ä‘áº·t Chrome Extension vá»›i Vite + Bun</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }

    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code&display=swap');

    pre,
    code {
      font-family: 'Fira Code', monospace;
    }

    .sidebar-link.active {
      background-color: #e0f2fe;
      color: #0284c7;
      font-weight: 600;
      border-left-color: #0284c7;
    }
  </style>
</head>

<body class="bg-slate-50 text-slate-800">

  <div class="flex">
    <aside class="fixed top-0 left-0 h-screen w-64 bg-white border-r border-slate-200 p-6 hidden md:block">
      <h1 class="text-xl font-bold text-slate-900">CÃ¡c bÆ°á»›c thá»±c hiá»‡n</h1>
      <nav id="sidebar-nav" class="mt-8 space-y-2">
        <a href="#step-0" class="sidebar-link block text-slate-600 hover:text-slate-900 py-2 px-3 rounded-lg border-l-4 border-transparent transition-colors duration-200">Giá»›i thiá»‡u</a>
        <a href="#step-1" class="sidebar-link block text-slate-600 hover:text-slate-900 py-2 px-3 rounded-lg border-l-4 border-transparent transition-colors duration-200">BÆ°á»›c 1: Khá»Ÿi táº¡o</a>
        <a href="#step-2" class="sidebar-link block text-slate-600 hover:text-slate-900 py-2 px-3 rounded-lg border-l-4 border-transparent transition-colors duration-200">BÆ°á»›c 2: CÃ i Ä‘áº·t Types</a>
        <a href="#step-3" class="sidebar-link block text-slate-600 hover:text-slate-900 py-2 px-3 rounded-lg border-l-4 border-transparent transition-colors duration-200">BÆ°á»›c 3: Cáº¥u trÃºc</a>
        <a href="#step-4" class="sidebar-link block text-slate-600 hover:text-slate-900 py-2 px-3 rounded-lg border-l-4 border-transparent transition-colors duration-200">BÆ°á»›c 4: Táº¡o Files</a>
        <a href="#step-5" class="sidebar-link block text-slate-600 hover:text-slate-900 py-2 px-3 rounded-lg border-l-4 border-transparent transition-colors duration-200">BÆ°á»›c 5: Cáº¥u hÃ¬nh Vite</a>
        <a href="#step-6" class="sidebar-link block text-slate-600 hover:text-slate-900 py-2 px-3 rounded-lg border-l-4 border-transparent transition-colors duration-200">BÆ°á»›c 6: ThÃªm mÃ£ nguá»“n</a>
        <a href="#step-7" class="sidebar-link block text-slate-600 hover:text-slate-900 py-2 px-3 rounded-lg border-l-4 border-transparent transition-colors duration-200">BÆ°á»›c 7: Cáº­p nháº­t Scripts</a>
        <a href="#step-8" class="sidebar-link block text-slate-600 hover:text-slate-900 py-2 px-3 rounded-lg border-l-4 border-transparent transition-colors duration-200">BÆ°á»›c 8: Build & Táº£i lÃªn</a>
      </nav>
    </aside>

    <main class="w-full md:ml-64 p-6 md:p-10">
      <div class="max-w-4xl mx-auto">
        <section id="step-0" class="mb-16 scroll-mt-24">
          <h2 class="text-3xl font-bold text-slate-900 mb-4 border-b pb-2">HÆ°á»›ng dáº«n Cáº¥u hÃ¬nh Chrome Extension vá»›i Vite + Bun</h2>
          <p class="text-lg text-slate-600 mb-4">ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i hÆ°á»›ng dáº«n tÆ°Æ¡ng tÃ¡c! Trang nÃ y sáº½ giÃºp báº¡n thiáº¿t láº­p má»™t dá»± Ã¡n tiá»‡n Ã­ch má»Ÿ rá»™ng cho Chrome sá»­ dá»¥ng Vite vÃ  Bun má»™t cÃ¡ch nhanh chÃ³ng. HÃ£y lÃ m theo tá»«ng bÆ°á»›c, sá»­ dá»¥ng cÃ¡c nÃºt sao chÃ©p mÃ£ Ä‘á»ƒ quÃ¡ trÃ¬nh Ä‘Æ°á»£c thuáº­n tiá»‡n nháº¥t.</p>
          <div class="bg-sky-100 border-l-4 border-sky-500 text-sky-800 p-4 rounded-r-lg" role="alert">
            <p class="font-bold">YÃªu cáº§u tiÃªn quyáº¿t</p>
            <p>Äáº£m báº£o báº¡n Ä‘Ã£ cÃ i Ä‘áº·t Bun trÃªn mÃ¡y cá»§a mÃ¬nh. Báº¡n cÃ³ thá»ƒ xem hÆ°á»›ng dáº«n táº¡i <a href="https://bun.sh/" target="_blank" class="underline font-medium">bun.sh</a>.</p>
          </div>
        </section>

        <section id="step-1" class="mb-12 scroll-mt-24">
          <h3 class="text-2xl font-bold text-slate-900 mb-4">BÆ°á»›c 1: Khá»Ÿi táº¡o Dá»± Ã¡n Vite vá»›i Bun</h3>
          <p class="text-slate-600 mb-4">Sá»­ dá»¥ng lá»‡nh `create vite` cá»§a Bun Ä‘á»ƒ táº¡o má»™t dá»± Ã¡n TypeScript thuáº§n. CÃ¡c lá»‡nh sau sáº½ táº¡o thÆ° má»¥c dá»± Ã¡n, di chuyá»ƒn vÃ o Ä‘Ã³ vÃ  cÃ i Ä‘áº·t cÃ¡c gÃ³i phá»¥ thuá»™c cáº§n thiáº¿t.</p>
          <div class="code-container relative">
            <pre class="bg-slate-900 text-white p-4 rounded-lg overflow-x-auto"><code class="language-bash">bun create vite@latest my-vite-extension -- --template vanilla-ts
cd my-vite-extension
bun install</code></pre>
            <button class="copy-btn absolute top-2 right-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-semibold py-1 px-2 rounded">Sao chÃ©p</button>
          </div>
        </section>

        <section id="step-2" class="mb-12 scroll-mt-24">
          <h3 class="text-2xl font-bold text-slate-900 mb-4">BÆ°á»›c 2: CÃ i Ä‘áº·t GÃ³i Ä‘á»‹nh nghÄ©a kiá»ƒu cho Chrome</h3>
          <p class="text-slate-600 mb-4">Äá»ƒ TypeScript hiá»ƒu vÃ  há»— trá»£ tá»± Ä‘á»™ng hoÃ n thÃ nh cho cÃ¡c API cá»§a Chrome (vÃ­ dá»¥: `chrome.runtime`), chÃºng ta cáº§n cÃ i Ä‘áº·t gÃ³i Ä‘á»‹nh nghÄ©a kiá»ƒu cá»§a nÃ³ báº±ng lá»‡nh sau.</p>
          <div class="code-container relative">
            <pre class="bg-slate-900 text-white p-4 rounded-lg overflow-x-auto"><code class="language-bash">bun add -d @types/chrome</code></pre>
            <button class="copy-btn absolute top-2 right-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-semibold py-1 px-2 rounded">Sao chÃ©p</button>
          </div>
        </section>

        <section id="step-3" class="mb-12 scroll-mt-24">
          <h3 class="text-2xl font-bold text-slate-900 mb-4">BÆ°á»›c 3: Cáº¥u trÃºc láº¡i ThÆ° má»¥c Dá»± Ã¡n</h3>
          <p class="text-slate-600 mb-4">Cáº¥u trÃºc máº·c Ä‘á»‹nh cá»§a Vite cáº§n Ä‘Æ°á»£c Ä‘iá»u chá»‰nh Ä‘á»ƒ phÃ¹ há»£p vá»›i má»™t Chrome Extension. Sáº¯p xáº¿p láº¡i cÃ¡c tá»‡p vÃ  thÆ° má»¥c cá»§a báº¡n nhÆ° sau. Báº¡n sáº½ cáº§n Ä‘á»•i tÃªn má»™t sá»‘ tá»‡p vÃ  táº¡o má»›i má»™t sá»‘ tá»‡p khÃ¡c.</p>
          <div class="bg-slate-900 text-white p-4 rounded-lg">
            <pre><code>my-vite-extension/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ ğŸ“„ background.ts
â”‚   â”œâ”€â”€ ğŸ“„ content.ts
â”‚   â””â”€â”€ ğŸ“„ popup.ts
â”œâ”€â”€ ğŸ“„ popup.html
â”œâ”€â”€ ğŸ“„ manifest.json
â”œâ”€â”€ ğŸ“„ vite.config.ts
â”œâ”€â”€ ğŸ“„ tsconfig.json
â””â”€â”€ ğŸ“„ package.json</code></pre>
          </div>
        </section>

        <section id="step-4" class="mb-12 scroll-mt-24">
          <h3 class="text-2xl font-bold text-slate-900 mb-4">BÆ°á»›c 4: Táº¡o Files</h3>
          <p class="text-slate-600 mb-4">BÃ¢y giá», hÃ£y táº¡o ná»™i dung cho cÃ¡c tá»‡p `manifest.json` vÃ  `popup.html`.</p>
          <h4 class="text-xl font-semibold text-slate-800 mt-6 mb-2">1. manifest.json</h4>
          <p class="text-slate-600 mb-4">ÄÃ¢y lÃ  tá»‡p "trÃ¡i tim" cá»§a extension, Ä‘á»‹nh nghÄ©a cÃ¡c thÃ´ng tin cÆ¡ báº£n vÃ  cÃ¡c script sáº½ cháº¡y.</p>
          <div class="code-container relative">
            <pre class="bg-slate-900 text-white p-4 rounded-lg overflow-x-auto"><code class="language-json">{
  "manifest_version": 3,
  "name": "My Vite Extension",
  "version": "1.0.0",
  "description": "Má»™t tiá»‡n Ã­ch Chrome Ä‘Æ°á»£c xÃ¢y dá»±ng báº±ng Vite vÃ  TypeScript.",
  "action": {
    "default_popup": "popup.html"
  },
  "background": {
    "service_worker": "background.js",
    "type": "module"
  },
  "content_scripts": [
    {
      "matches": ["&lt;all_urls&gt;"],
      "js": ["content.js"]
    }
  ],
  "permissions": ["storage"]
}</code></pre>
            <button class="copy-btn absolute top-2 right-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-semibold py-1 px-2 rounded">Sao chÃ©p</button>
          </div>
          <h4 class="text-xl font-semibold text-slate-800 mt-6 mb-2">2. popup.html</h4>
          <p class="text-slate-600 mb-4">ÄÃ¢y lÃ  tá»‡p HTML sáº½ hiá»ƒn thá»‹ khi ngÆ°á»i dÃ¹ng nháº¥p vÃ o biá»ƒu tÆ°á»£ng cá»§a extension.</p>
          <div class="code-container relative">
            <pre class="bg-slate-900 text-white p-4 rounded-lg overflow-x-auto"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8" /&gt;
    &lt;title&gt;Vite Extension Popup&lt;/title&gt;
    &lt;style&gt;
      body { width: 250px; padding: 10px; font-family: sans-serif; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Vite + TypeScript&lt;/h1&gt;
    &lt;p&gt;ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i tiá»‡n Ã­ch Chrome!&lt;/p&gt;
    &lt;script type="module" src="/src/popup.ts"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
            <button class="copy-btn absolute top-2 right-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-semibold py-1 px-2 rounded">Sao chÃ©p</button>
          </div>
        </section>

        <section id="step-5" class="mb-12 scroll-mt-24">
          <h3 class="text-2xl font-bold text-slate-900 mb-4">BÆ°á»›c 5: Cáº¥u hÃ¬nh Vite (`vite.config.ts`)</h3>
          <p class="text-slate-600 mb-4">ÄÃ¢y lÃ  bÆ°á»›c quan trá»ng nháº¥t. ChÃºng ta cáº§n báº£o Vite build táº¥t cáº£ cÃ¡c script (popup, background, content) vÃ  sao chÃ©p cÃ¡c tá»‡p tÄ©nh nhÆ° `manifest.json`. Äáº§u tiÃªn, cÃ i Ä‘áº·t plugin `vite-plugin-static-copy`.</p>
          <div class="code-container relative mb-4">
            <pre class="bg-slate-900 text-white p-4 rounded-lg overflow-x-auto"><code class="language-bash">bun add -d vite-plugin-static-copy</code></pre>
            <button class="copy-btn absolute top-2 right-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-semibold py-1 px-2 rounded">Sao chÃ©p</button>
          </div>
          <p class="text-slate-600 mb-4">Sau Ä‘Ã³, cáº­p nháº­t tá»‡p `vite.config.ts` cá»§a báº¡n vá»›i ná»™i dung sau:</p>
          <div class="code-container relative">
            <pre class="bg-slate-900 text-white p-4 rounded-lg overflow-x-auto"><code class="language-typescript">import { defineConfig } from 'vite';
import { resolve } from 'path';
import { viteStaticCopy } from 'vite-plugin-static-copy';

export default defineConfig({
  build: {
    outDir: 'dist',
    rollupOptions: {
      input: {
        popup: resolve(__dirname, 'popup.html'),
        background: resolve(__dirname, 'src/background.ts'),
        content: resolve(__dirname, 'src/content.ts'),
      },
      output: {
        entryFileNames: '[name].js',
        chunkFileNames: 'chunks/[name].js',
        assetFileNames: 'assets/[name].[ext]',
      },
    },
  },
  plugins: [
    viteStaticCopy({
      targets: [
        {
          src: 'manifest.json',
          dest: '.'
        }
      ]
    })
  ]
});</code></pre>
            <button class="copy-btn absolute top-2 right-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-semibold py-1 px-2 rounded">Sao chÃ©p</button>
          </div>
        </section>

        <section id="step-6" class="mb-12 scroll-mt-24">
          <h3 class="text-2xl font-bold text-slate-900 mb-4">BÆ°á»›c 6: ThÃªm MÃ£ nguá»“n TypeScript</h3>
          <p class="text-slate-600 mb-4">ThÃªm má»™t vÃ i dÃ²ng mÃ£ Ä‘Æ¡n giáº£n vÃ o cÃ¡c tá»‡p `.ts` Ä‘á»ƒ kiá»ƒm tra xem má»i thá»© cÃ³ hoáº¡t Ä‘á»™ng khÃ´ng.</p>
          <div class="code-container relative mb-4">
            <p class="text-sm font-semibold text-slate-500 bg-slate-800 -mt-4 -mx-4 mb-4 p-2 px-4 border-b border-slate-700">src/popup.ts</p>
            <pre class="bg-slate-900 text-white p-4 rounded-lg overflow-x-auto -mt-4"><code class="language-typescript">console.log("Popup script loaded!");</code></pre>
            <button class="copy-btn absolute top-2 right-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-semibold py-1 px-2 rounded">Sao chÃ©p</button>
          </div>
          <div class="code-container relative mb-4">
            <p class="text-sm font-semibold text-slate-500 bg-slate-800 -mt-4 -mx-4 mb-4 p-2 px-4 border-b border-slate-700">src/background.ts</p>
            <pre class="bg-slate-900 text-white p-4 rounded-lg overflow-x-auto -mt-4"><code class="language-typescript">chrome.runtime.onInstalled.addListener(() => {
  console.log("Extension installed with Vite!");
});</code></pre>
            <button class="copy-btn absolute top-2 right-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-semibold py-1 px-2 rounded">Sao chÃ©p</button>
          </div>
          <div class="code-container relative">
            <p class="text-sm font-semibold text-slate-500 bg-slate-800 -mt-4 -mx-4 mb-4 p-2 px-4 border-b border-slate-700">src/content.ts</p>
            <pre class="bg-slate-900 text-white p-4 rounded-lg overflow-x-auto -mt-4"><code class="language-typescript">console.log("Content script injected by Vite!");</code></pre>
            <button class="copy-btn absolute top-2 right-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-semibold py-1 px-2 rounded">Sao chÃ©p</button>
          </div>
        </section>

        <section id="step-7" class="mb-12 scroll-mt-24">
          <h3 class="text-2xl font-bold text-slate-900 mb-4">BÆ°á»›c 7: Cáº­p nháº­t `package.json`</h3>
          <p class="text-slate-600 mb-4">Sá»­a láº¡i má»¥c `scripts` trong tá»‡p `package.json` Ä‘á»ƒ cÃ³ thá»ƒ build dá»± Ã¡n hoáº·c cháº¡y á»Ÿ cháº¿ Ä‘á»™ theo dÃµi thay Ä‘á»•i (`watch mode`) má»™t cÃ¡ch tiá»‡n lá»£i.</p>
          <div class="code-container relative">
            <pre class="bg-slate-900 text-white p-4 rounded-lg overflow-x-auto"><code class="language-json">"scripts": {
  "dev": "vite build --watch",
  "build": "vite build"
}</code></pre>
            <button class="copy-btn absolute top-2 right-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-semibold py-1 px-2 rounded">Sao chÃ©p</button>
          </div>
        </section>

        <section id="step-8" class="mb-12 scroll-mt-24">
          <h3 class="text-2xl font-bold text-slate-900 mb-4">BÆ°á»›c 8: Build vÃ  Táº£i lÃªn Chrome</h3>
          <p class="text-slate-600 mb-4">Cuá»‘i cÃ¹ng, hÃ£y build dá»± Ã¡n cá»§a báº¡n vÃ  táº£i nÃ³ lÃªn Chrome Ä‘á»ƒ kiá»ƒm tra.</p>
          <ol class="list-decimal list-inside text-slate-600 space-y-3">
            <li>Cháº¡y lá»‡nh build trong terminal:
              <div class="code-container relative my-2">
                <pre class="bg-slate-900 text-white p-4 rounded-lg overflow-x-auto"><code class="language-bash"># Äá»ƒ build má»™t láº§n cho production
bun run build

# Hoáº·c Ä‘á»ƒ tá»± Ä‘á»™ng build láº¡i khi cÃ³ thay Ä‘á»•i
bun run dev</code></pre>
              </div>
            </li>
            <li>Má»™t thÆ° má»¥c `dist` sáº½ Ä‘Æ°á»£c táº¡o ra.</li>
            <li>Má»Ÿ Chrome, Ä‘iá»u hÆ°á»›ng Ä‘áº¿n trang <code class="bg-slate-200 text-slate-700 rounded px-1 py-0.5">chrome://extensions</code>.</li>
            <li>Báº­t <strong class="font-semibold">"Cháº¿ Ä‘á»™ dÃ nh cho nhÃ  phÃ¡t triá»ƒn"</strong> (Developer mode) á»Ÿ gÃ³c trÃªn bÃªn pháº£i.</li>
            <li>Nháº¥p vÃ o nÃºt <strong class="font-semibold">"Táº£i tiá»‡n Ã­ch Ä‘Ã£ giáº£i nÃ©n"</strong> (Load unpacked).</li>
            <li>Chá»n thÆ° má»¥c `dist` trong dá»± Ã¡n cá»§a báº¡n.</li>
          </ol>
          <p class="mt-4 text-slate-600">Náº¿u má»i thá»© thÃ nh cÃ´ng, báº¡n sáº½ tháº¥y tiá»‡n Ã­ch cá»§a mÃ¬nh xuáº¥t hiá»‡n. ChÃºc má»«ng!</p>
        </section>
      </div>
    </main>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const copyButtons = document.querySelectorAll('.copy-btn');
      copyButtons.forEach(button => {
        button.addEventListener('click', () => {
          const pre = button.previousElementSibling;
          const code = pre.querySelector('code');
          const textToCopy = code.innerText;

          navigator.clipboard.writeText(textToCopy).then(() => {
            const originalText = button.innerText;
            button.innerText = 'ÄÃ£ chÃ©p!';
            button.classList.add('bg-green-500');
            setTimeout(() => {
              button.innerText = originalText;
              button.classList.remove('bg-green-500');
            }, 2000);
          }).catch(err => {
            console.error('KhÃ´ng thá»ƒ sao chÃ©p:', err);
          });
        });
      });

      const sections = document.querySelectorAll('section');
      const navLinks = document.querySelectorAll('#sidebar-nav a');

      const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            navLinks.forEach(link => {
              link.classList.remove('active');
              if (link.getAttribute('href').substring(1) === entry.target.id) {
                link.classList.add('active');
              }
            });
          }
        });
      }, { rootMargin: '-50% 0px -50% 0px' });

      sections.forEach(section => {
        observer.observe(section);
      });
    });
  </script>
</body>

</html>